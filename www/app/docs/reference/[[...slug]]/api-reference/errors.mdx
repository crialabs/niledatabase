export const metadata = {
  title: ["Errors", "API reference"],
  description: "REST API Errors",
  order: 6,
};

# Errors

These error codes are applicable for all endpoints.

### Resource not found

- status: 404
- message: Resource not found
- possible fix: Change the request to point to a valid resource

### Unauthorized

- status: 401
- message: User not authorized to perform the operation
- possible fix: Try to provide a valid user credential

### Resource already exist

- status: 409
- message: The resource already exist
- possible fix: Try to create another resource with a different name

### Unauthorized

- status: 401
- message: User not authorized to perform the operation
- possible fix: Try to provide a valid user credential


## Auth errors 

### OAUTH_GET_ACCESS_TOKEN_ERROR
This occurs when there was an error in the POST request to the OAuth provider and we were not able to retrieve the access token.

Please double check your provider settings in the (console)[https://console.thenile.dev].

### OAUTH_CALLBACK_HANDLER_ERROR
This error will occur when there was an issue parsing the JSON request body, for example.

There should also be further details logged when this occurs, such as the error is thrown, and the request body itself to aid in debugging.

### SIGNIN_OAUTH_ERROR
This error occurs during the redirection to the authorization URL of the OAuth provider. Possible causes:

Cookie handling Either PKCE code verifier or the generation of the CSRF token hash in the internal state failed.
If set, check the cookie configuration, and make sure the browser is not blocking/restricting cookies. This is likely to happen if a user requests from the regional API directly instead of an application.

### OAUTH_CALLBACK_ERROR
This can occur during the handling of the callback if the code_verifier cookie was not found or an invalid state was returned from the OAuth provider. Check to be sure the provider is enabled in the (console)[https://console.thenile.dev]

### CALLBACK_CREDENTIALS_JWT_ERROR
JSON Web Tokens are used for Sessions by default if the Credentials provider is used. Other providers automatically switch to database sessions are enabled by default.

If you are using a Credentials Provider, Nile will not persist users or sessions in a database for users signed in with such a session. If a user does not sign out and attempts to use a different authentication (Google, for example), this error may surface.

It is recommended to use Providers *or* Credentials, and not both. Generally speaking, Credentials are useful for POCs and testing, but a production application should be using SSO.

### PKCE_ERROR
The provider you tried to use failed when setting PKCE or Proof Key for Code Exchange. The code_verifier is saved in a cookie called (by default) __Secure-nile.pkce.code_verifier which expires after 15 minutes. Check if cookies.pkceCodeVerifier is configured correctly.

The default code_challenge_method is "S256". This is currently not configurable to "plain", as per RFC7636:

If the client is capable of using "S256", it MUST use "S256", as S256" is Mandatory To Implement (MTI) on the server.

### INVALID_CALLBACK_URL_ERROR
The callbackUrl provided was either invalid or not defined. See specifying a callbackUrl for more information.
